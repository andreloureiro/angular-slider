var MODULE_NAME,SLIDER_TAG,angularize,bindHtml,gap,halfWidth,hide,inputEvents,module,offset,offsetLeft,pixelize,qualifiedDirectiveDefinition,roundStep,show,sliderDirective,width;MODULE_NAME="uiSlider";SLIDER_TAG="slider";angularize=function(e){return angular.element(e)};pixelize=function(e){return""+e+"px"};hide=function(e){return e.css({opacity:0})};show=function(e){return e.css({opacity:1})};offset=function(e,t){return e.css({left:t})};halfWidth=function(e){return e[0].offsetWidth/2};offsetLeft=function(e){return e[0].offsetLeft};width=function(e){return e[0].offsetWidth};gap=function(e,t){return offsetLeft(t)-offsetLeft(e)-width(e)};bindHtml=function(e,t){return e.attr("ng-bind-html-unsafe",t)};roundStep=function(e,t,n,r){var i,s,o,u;if(r==null){r=0}if(n==null){n=1/Math.pow(10,t)}s=(e-r)%n;u=s>n/2?e+n-s:e-s;i=Math.pow(10,t);o=u*i/i;return o.toFixed(t)};inputEvents={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"}};sliderDirective=function(e){return{restrict:"EA",scope:{floor:"@",ceiling:"@",step:"@",precision:"@",ngModel:"=?",ngModelLow:"=?",ngModelHigh:"=?",translate:"&"},template:'<span class="bar"></span><span class="bar selection"></span><span class="pointer"></span><span class="pointer"></span><span class="bubble selection"></span><span ng-bind-html-unsafe="translate({value: floor})" class="bubble limit"></span><span ng-bind-html-unsafe="translate({value: ceiling})" class="bubble limit"></span><span class="bubble"></span><span class="bubble"></span><span class="bubble"></span>',compile:function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;if(n.translate){n.$set("translate",""+n.translate+"(value)")}h=n.ngModel==null&&n.ngModelLow!=null&&n.ngModelHigh!=null;w=function(){var e,n,r,i;r=t.children();i=[];for(e=0,n=r.length;e<n;e++){s=r[e];i.push(angularize(s))}return i}(),u=w[0],v=w[1],c=w[2],l=w[3],m=w[4],o=w[5],r=w[6],f=w[7],a=w[8],i=w[9];d=h?"ngModelLow":"ngModel";p="ngModelHigh";bindHtml(m,"'Range: ' + translate({value: diff})");bindHtml(f,"translate({value: "+d+"})");bindHtml(a,"translate({value: "+p+"})");bindHtml(i,"translate({value: "+d+"}) + ' - ' + translate({value: "+p+"})");if(!h){E=[v,l,m,a,i];for(y=0,b=E.length;y<b;y++){t=E[y];t.remove()}}g=[d,"floor","ceiling"];if(h){g.push(p)}return{post:function(t,n,s){var y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;b=false;N=angularize(document);if(!s.translate){t.translate=function(e){return e.value}}k=y=x=E=T=S=A=C=void 0;w=function(){var e,n,r;if(t.precision==null){t.precision=0}if(t.step==null){t.step=1}for(n=0,r=g.length;n<r;n++){e=g[n];t[e]=roundStep(parseFloat(t[e]),parseInt(t.precision),parseFloat(t.step),parseFloat(t.floor))}t.diff=roundStep(t[p]-t[d],parseInt(t.precision),parseFloat(t.step),parseFloat(t.floor));k=halfWidth(c);y=width(u);x=0;E=y-width(c);T=parseFloat(s.floor);S=parseFloat(s.ceiling);A=S-T;return C=E-x};L=function(){var e,s,u,g,S,L,O,M,_;w();g=function(e){var t;if(e.clientX){return e.clientX}t=function(e){if(e.touches&&e.touches[0]&&e.touches[0].clientX){return e.touches[0].clientX}else{return false}};if(t(e)){return t(e)}if(t(e.originalEvent)){return t(e.originalEvent)}return false};S=function(e){return(e-x)/C*100};O=function(e){return(e-T)/A*100};L=function(e){return pixelize(e*C/100)};u=function(e){return offset(e,pixelize(Math.min(Math.max(0,offsetLeft(e)),y-width(e))))};_=function(){var e,n;offset(r,pixelize(y-width(r)));n=O(t[d]);offset(c,L(n));offset(f,pixelize(offsetLeft(c)-halfWidth(f)+k));if(h){e=O(t[p]);offset(l,L(e));offset(a,pixelize(offsetLeft(l)-halfWidth(a)+k));offset(v,pixelize(offsetLeft(c)+k));v.css({width:L(e-n)});offset(m,pixelize(offsetLeft(v)+halfWidth(v)-halfWidth(m)));return offset(i,pixelize(offsetLeft(v)+halfWidth(v)-halfWidth(i)))}};e=function(){var e;u(f);e=a;if(h){u(a);u(m);if(gap(f,a)<10){hide(f);hide(a);u(i);show(i);e=i}else{show(f);show(a);hide(i);e=a}}if(gap(o,f)<5){hide(o)}else{if(h){if(gap(o,e)<5){hide(o)}else{show(o)}}else{show(o)}}if(gap(f,r)<5){return hide(r)}else{if(h){if(gap(e,r)<5){return hide(r)}else{return show(r)}}else{return show(r)}}};s=function(e,r,i){var s,o,u;s=function(){e.removeClass("active");N.unbind(i.move);return N.unbind(i.end)};o=function(e){var i,s,o,u;i=g(e);s=i-n[0].getBoundingClientRect().left-k;s=Math.max(Math.min(s,E),x);o=S(s);u=T+A*o/100;if(h){if(r===d){if(u>t[p]){r=p;c.removeClass("active");l.addClass("active")}}else{if(u<t[d]){r=d;l.removeClass("active");c.addClass("active")}}}u=roundStep(u,parseInt(t.precision),parseFloat(t.step),parseFloat(t.floor));t[r]=u;return t.$apply()};u=function(t){e.addClass("active");w();t.stopPropagation();t.preventDefault();N.bind(i.move,o);return N.bind(i.end,s)};return e.bind(i.start,u)};M=function(){var e,t,n,r,i,o;b=true;e=function(e){s(c,d,inputEvents[e]);return s(l,p,inputEvents[e])};i=["touch","mouse"];o=[];for(n=0,r=i.length;n<r;n++){t=i[n];o.push(e(t))}return o};_();e();if(!b){return M()}};e(L);for(M=0,_=g.length;M<_;M++){O=g[M];t.$watch(O,L)}return window.addEventListener("resize",L)}}}}};qualifiedDirectiveDefinition=["$timeout",sliderDirective];module=function(e,t){return t.module(MODULE_NAME,[]).directive(SLIDER_TAG,qualifiedDirectiveDefinition)};module(window,window.angular)